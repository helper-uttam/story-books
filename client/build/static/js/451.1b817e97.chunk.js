"use strict";(self.webpackChunkMERN=self.webpackChunkMERN||[]).push([[451],{5451:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var i=s(8152),n="Dashboard_container__J9Fox",l="Dashboard_item__wWjXL",o="Dashboard_loading__doLto",r=s(4569),c=s.n(r),a=s(2791),d=s(1296),u="story_story__f3Mns",h="story_title__4l+7k",f="story_description__IW6kL",_="story_btn__UGmrq",m="story_delete__6lYhb",p="story_edit__ZhqBZ",g="story_like__KwZYo",k=s(184),v=function(e){var t=(0,a.useState)(!1),s=(0,i.Z)(t,2),n=s[0],l=s[1],o=(0,a.useState)(""),r=(0,i.Z)(o,2),v=r[0],x=r[1],j=(0,a.useState)(!1),b=(0,i.Z)(j,2),y=b[0],N=b[1],Z=(0,a.useState)({email:""}),w=(0,i.Z)(Z,2),S=w[0],L=w[1],C=(0,a.useState)(!1),E=(0,i.Z)(C,2),D=E[0],M=E[1];(0,a.useEffect)((function(){L({email:localStorage.getItem("email")})}),[y,D]);return(0,k.jsxs)("div",{className:u,children:[!n&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:h,children:(0,k.jsx)("h3",{children:e.title})}),(0,k.jsx)("div",{className:f,children:(0,k.jsx)("p",{children:e.description})}),(0,k.jsxs)("div",{className:_,children:[(0,k.jsxs)("button",{id:e.id,type:"submit",value:e.id,className:g,onClick:function(e){var t=e.target.id;if(y)c().post("http://localhost:5000/stories/dislike/"+t,S).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),N(!y);else{console.log("like");var s=localStorage.getItem("email");L(s),c().post("http://localhost:5000/stories/like/"+t,S).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),N(!y)}},children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:y?"#fd79a8":"#bdc3c7",className:"bi bi-star-fill",id:e.id,viewBox:"0 0 16 16",children:(0,k.jsx)("path",{id:e.id,d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"})}),(0,k.jsx)("br",{}),(0,k.jsxs)("p",{children:[e.likes," likes"]})]}),(0,k.jsx)("button",{className:m,name:"title",value:e.id,type:"submit",onClick:function(e){var t=e.target.value;c().delete("https://story-books-service.herokuapp.com/stories/"+t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),M(!0)},children:"Delete"}),(0,k.jsx)("button",{className:p,name:"description",value:e.id,type:"submit",onClick:function(e){x(e.target.value),l(!0)},children:"Edit"}),(0,k.jsxs)("p",{style:{color:"gray"},children:[" Published on ",e.date]})]})]}),n&&(0,k.jsx)(d.Z,{id:v,renderForm:l})]})},x=function(){var e=(0,a.useState)([{title:"",description:"",likes:"",date:""}]),t=(0,i.Z)(e,2),s=t[0],r=t[1],d=(0,a.useState)(!1),u=(0,i.Z)(d,2),h=u[0],f=u[1];return(0,a.useEffect)((function(){c().get("https://story-books-service.herokuapp.com/stories/").then((function(e){return e.data})).then((function(e){r(e),f(!0)})).catch((function(e){return console.log(e)}))}),[s]),h?(0,k.jsx)("div",{className:n,children:s.sort((function(e,t){return t.likes.length-e.likes.length})).map((function(e,t){var s=e.likes.toString().split(",");return(0,k.jsx)("div",{className:l,children:(0,k.jsx)(v,{id:e._id,title:e.title,description:e.description,likes:s.length,date:e.date})},t)}))}):(0,k.jsx)("div",{className:o,children:(0,k.jsx)("h1",{children:"Loading..."})})}}}]);
//# sourceMappingURL=451.1b817e97.chunk.js.map