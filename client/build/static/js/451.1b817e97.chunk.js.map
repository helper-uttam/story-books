{"version":3,"file":"static/js/451.1b817e97.chunk.js","mappings":"4JACA,EAA4B,6BAA5B,EAAgE,wBAAhE,EAAkG,2B,uCCAlG,EAAwB,qBAAxB,EAAqD,qBAArD,EAAwF,2BAAxF,EAAyH,mBAAzH,EAAqJ,sBAArJ,EAAkL,oBAAlL,EAA6M,oB,SCgF7M,EA5Ec,SAACA,GAEX,OAAwCC,EAAAA,EAAAA,WAAS,GAAjD,eAAOC,EAAP,KAAqBC,EAArB,KACA,GAAoBF,EAAAA,EAAAA,UAAS,IAA7B,eAAOG,EAAP,KAAWC,EAAX,KACA,GAAwBJ,EAAAA,EAAAA,WAAS,GAAjC,eAAOK,EAAP,KAAaC,EAAb,KACA,GAAwBN,EAAAA,EAAAA,UAAS,CAC7BO,MAAO,KADX,eAAOC,EAAP,KAAaC,EAAb,KAGA,GAAsBT,EAAAA,EAAAA,WAAS,GAA/B,eAAOU,EAAP,KAAYC,EAAZ,MAEAC,EAAAA,EAAAA,YAAU,WACNH,EAAQ,CACJF,MAAOM,aAAaC,QAAQ,aAGlC,CAACT,EAAMK,IAqCT,OAAQ,iBAAKK,UAAWC,EAAhB,WAECf,IAAgB,iCACjB,gBAAKc,UAAWC,EAAhB,UAA+B,wBAAKjB,EAAMkB,WACtC,gBAAKF,UAAWC,EAAhB,UAAqC,uBAAIjB,EAAMmB,iBAC/C,iBAAKH,UAAWC,EAAhB,WACA,oBAAQG,GAAIpB,EAAMoB,GAAIC,KAAK,SAASC,MAAOtB,EAAMoB,GAAIJ,UAAWC,EAAcM,QA5BtE,SAACC,GACjB,IAAMpB,EAAKoB,EAAEC,OAAOL,GAGpB,GAAGd,EACCoB,IAAAA,KAAW,yCAAyCtB,EAAIK,GACvDkB,MAAK,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MACxBG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAC1BzB,GAASD,OAGT,CACAuB,QAAQC,IAAI,QACZ,IAAItB,EAAQM,aAAaC,QAAQ,SACjCL,EAAQF,GACRkB,IAAAA,KAAW,sCAAsCtB,EAAIK,GACpDkB,MAAK,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MACxBG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAC1BzB,GAASD,KAUL,WACI,gBAAM2B,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,KAAM9B,EAAO,UAAY,UAAWU,UAAU,kBAAmBI,GAAIpB,EAAMoB,GAAIiB,QAAQ,YAAvJ,UACA,iBAAOjB,GAAIpB,EAAMoB,GAAIkB,EAAE,kQAEvB,mBACA,yBAAItC,EAAMuC,MAAV,gBAEJ,mBAAQvB,UAAWC,EAAgBuB,KAAK,QAAQlB,MAAOtB,EAAMoB,GAAIC,KAAK,SAASE,QAhDrE,SAACC,GACnB,IAAMJ,EAAKI,EAAEC,OAAOH,MACpBI,IAAAA,OAAa,qDAAsDN,GAClEO,MAAK,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MACxBG,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAC1BpB,GAAO,IA2CC,qBACA,mBAAQI,UAAWC,EAAcuB,KAAK,cAAclB,MAAOtB,EAAMoB,GAAIC,KAAK,SAASE,QAzC3E,SAACC,GACjBnB,EAAMmB,EAAEC,OAAOH,OACfnB,GAAgB,IAuCR,mBACA,eAAGsC,MAAO,CAACC,MAAM,QAAjB,2BAAyC1C,EAAM2C,cAItDzC,IAAgB,SAAC0C,EAAA,EAAD,CAAWxB,GAAIhB,EAAIyC,WAAY1C,QC3BxD,EA5CkB,WACd,OAA8BF,EAAAA,EAAAA,UAAS,CAAC,CACpCiB,MAAO,GACPC,YAAa,GACboB,MAAO,GACPI,KAAM,MAJV,eAAOG,EAAP,KAAgBC,EAAhB,KAOA,GAAgC9C,EAAAA,EAAAA,WAAS,GAAzC,eAAO+C,EAAP,KAAiBC,EAAjB,KAYA,OAVApC,EAAAA,EAAAA,YAAU,WACNa,IAAAA,IAAU,sDACTC,MAAK,SAAAC,GAAG,OAAIA,EAAIsB,QAChBvB,MAAK,SAAAuB,GACFH,EAAWG,GACXD,GAAY,MAEflB,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,QAC5B,CAACc,IAECE,GAGG,gBAAKhC,UAAWC,EAAhB,SAEH6B,EAAQK,MAAK,SAAUC,EAAGC,GACtB,OAAOA,EAAEd,MAAMe,OAASF,EAAEb,MAAMe,UACjCC,KAAI,SAACC,EAAOC,GACX,IACIC,EADQF,EAAMjB,MACFoB,WAAWC,MAAM,KACjC,OAAO,gBAAK5C,UAAWC,EAAhB,UACH,SAAC,EAAD,CACAG,GAAIoC,EAAMK,IACV3C,MAAOsC,EAAMtC,MACbC,YAAaqC,EAAMrC,YACnBoB,MAAOmB,EAAIJ,OACXX,KAAMa,EAAMb,QAN0Bc,SATvC,gBAAKzC,UAAWC,EAAhB,UAAiC","sources":["webpack://MERN/./src/components/Dashboard.module.css?fff2","webpack://MERN/./src/card/story.module.css?8876","card/Story.jsx","components/Dashboard.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Dashboard_container__J9Fox\",\"item\":\"Dashboard_item__wWjXL\",\"loading\":\"Dashboard_loading__doLto\"};","// extracted by mini-css-extract-plugin\nexport default {\"story\":\"story_story__f3Mns\",\"title\":\"story_title__4l+7k\",\"description\":\"story_description__IW6kL\",\"btn\":\"story_btn__UGmrq\",\"delete\":\"story_delete__6lYhb\",\"edit\":\"story_edit__ZhqBZ\",\"like\":\"story_like__KwZYo\",\"buttons\":\"story_buttons__umu3O\"};","import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport EditStory from \"../components/EditStory\";\r\nimport classes from \"./story.module.css\";\r\n\r\nconst Story = (props) => {\r\n\r\n    const [showEditForm, setShowEditForm] = useState(false);\r\n    const [ID, setId] = useState('');\r\n    const [like, setLike] = useState(false);\r\n    const [user, setUser] = useState({\r\n        email: ''\r\n    });\r\n    const [del, setDel] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        setUser({\r\n            email: localStorage.getItem('email')\r\n        });\r\n\r\n    },[like, del])\r\n    \r\n    const deleteHandler = (e) => {\r\n        const id = e.target.value;\r\n        axios.delete('https://story-books-service.herokuapp.com/stories/'+ id)\r\n        .then(res => console.log(res))\r\n        .catch(err => console.log(err));\r\n        setDel(true);\r\n    }\r\n   \r\n    const editHandler = (e) => {\r\n        setId(e.target.value);\r\n        setShowEditForm(true);\r\n    }\r\n\r\n    const likeHandler = (e) => {\r\n        const ID = e.target.id;\r\n\r\n        //like to dislike\r\n        if(like){   \r\n            axios.post('http://localhost:5000/stories/dislike/'+ID, user)\r\n            .then(res => console.log(res))\r\n            .catch(err => console.log(err));\r\n            setLike(!like);\r\n        }\r\n         //dislike to like   \r\n        else{\r\n            console.log('like');\r\n            let email = localStorage.getItem('email');\r\n            setUser(email);\r\n            axios.post('http://localhost:5000/stories/like/'+ID, user)\r\n            .then(res => console.log(res))\r\n            .catch(err => console.log(err));\r\n            setLike(!like);\r\n        }\r\n    }\r\n\r\n    return  <div className={classes.story}>\r\n        {\r\n            !showEditForm && <>\r\n            <div className={classes.title}><h3>{props.title}</h3></div>\r\n                <div className={classes.description}><p>{props.description}</p></div>\r\n                <div className={classes.btn}>\r\n                <button id={props.id} type=\"submit\" value={props.id} className={classes.like} onClick={likeHandler}>\r\n                    <svg  xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" fill={like ? '#fd79a8' : '#bdc3c7'} className=\"bi bi-star-fill\"  id={props.id} viewBox=\"0 0 16 16\">\r\n                    <path  id={props.id} d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\r\n                    </svg>\r\n                    <br />\r\n                    <p>{props.likes} likes</p>\r\n                </button>\r\n                <button className={classes.delete} name=\"title\" value={props.id} type=\"submit\" onClick={deleteHandler}>Delete</button>\r\n                <button className={classes.edit} name=\"description\" value={props.id} type=\"submit\" onClick={editHandler}>Edit</button>\r\n                <p style={{color:\"gray\"}}> Published on {props.date}</p>\r\n            </div>\r\n            </>\r\n        }\r\n        {showEditForm && <EditStory id={ID} renderForm={setShowEditForm}/>}\r\n    </div> \r\n    \r\n}\r\n\r\nexport default Story;","import classes from \"./Dashboard.module.css\";\r\nimport Story from \"../card/Story\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Dashboard = () => {\r\n    const [stories, setStories] = useState([{\r\n        title: '',\r\n        description: '',\r\n        likes: '',\r\n        date: ''\r\n    }]);\r\n    \r\n    const [didMount, setDidMount] = useState(false); \r\n\r\n    useEffect(()=>{\r\n        axios.get('https://story-books-service.herokuapp.com/stories/')\r\n        .then(res => res.data)\r\n        .then(data => {\r\n            setStories(data)\r\n            setDidMount(true)\r\n        })\r\n        .catch(err => console.log(err))\r\n    },[stories]);\r\n\r\n    if(!didMount)\r\n        return <div className={classes.loading}><h1>Loading...</h1></div>\r\n    else\r\n    return <div className={classes.container}>\r\n        {\r\n        stories.sort(function (a, b) {\r\n            return b.likes.length - a.likes.length;\r\n        }).map((story, index) => {\r\n            let likes = story.likes;\r\n            let len = likes.toString().split(',');\r\n            return <div className={classes.item} key={index}>\r\n                <Story \r\n                id={story._id}\r\n                title={story.title}\r\n                description={story.description}\r\n                likes={len.length}\r\n                date={story.date}\r\n                />\r\n        </div>\r\n        })\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Dashboard;"],"names":["props","useState","showEditForm","setShowEditForm","ID","setId","like","setLike","email","user","setUser","del","setDel","useEffect","localStorage","getItem","className","classes","title","description","id","type","value","onClick","e","target","axios","then","res","console","log","catch","err","xmlns","width","height","fill","viewBox","d","likes","name","style","color","date","EditStory","renderForm","stories","setStories","didMount","setDidMount","data","sort","a","b","length","map","story","index","len","toString","split","_id"],"sourceRoot":""}